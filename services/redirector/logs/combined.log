{"level":"info","message":"Initiating app","timestamp":"2024-10-17 20:14:17"}
{"code":"ECONNREFUSED","level":"error","message":"Failed to connect to RabbitMQ:","stack":"AggregateError [ECONNREFUSED]: \n    at internalConnectMultiple (node:net:1118:18)\n    at afterConnectMultiple (node:net:1685:7)","timestamp":"2024-10-17 20:14:17"}
{"level":"info","message":"Initiating app","timestamp":"2024-10-17 20:16:52"}
{"level":"info","message":"Connected to RabbitMQ, queue: url-shrtnr","timestamp":"2024-10-17 20:16:52"}
{"level":"info","message":"Initiating app","timestamp":"2024-10-17 20:18:16"}
{"level":"info","message":"Connected to RabbitMQ, queue: url-shrtnr","timestamp":"2024-10-17 20:18:16"}
{"level":"info","message":"Initiating app","timestamp":"2024-10-17 22:46:47"}
{"code":"ENOTFOUND","errno":-3008,"hostname":"rabbitmq","level":"error","message":"Failed to connect to RabbitMQ: getaddrinfo ENOTFOUND rabbitmq","stack":"Error: getaddrinfo ENOTFOUND rabbitmq\n    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:120:26)","syscall":"getaddrinfo","timestamp":"2024-10-17 22:46:47"}
{"level":"info","message":"Initiating app","timestamp":"2024-10-17 22:52:48"}
{"level":"info","message":"Trying to connect to","timestamp":"2024-10-17 22:52:48"}
{"level":"info","message":"Connected to RabbitMQ, queue: url-shrtnr","timestamp":"2024-10-17 22:52:49"}
{"level":"info","message":"Initiating app","timestamp":"2024-10-17 22:53:34"}
{"level":"info","message":"Trying to connect to undefined","timestamp":"2024-10-17 22:53:34"}
{"level":"info","message":"Connected to RabbitMQ, queue: url-shrtnr","timestamp":"2024-10-17 22:53:34"}
{"level":"info","message":"Initiating app","timestamp":"2024-10-17 22:59:26"}
{"level":"info","message":"Trying to connect to amqp://localhost:5672","timestamp":"2024-10-17 22:59:26"}
{"level":"info","message":"Connected to RabbitMQ, queue: url-shrtnr","timestamp":"2024-10-17 22:59:26"}
{"level":"info","message":"Initiating app","timestamp":"2024-10-17 23:01:09"}
{"level":"info","message":"Trying to connect to amqp://localhost:5672","timestamp":"2024-10-17 23:01:09"}
{"level":"info","message":"Connected to RabbitMQ, queue: url-shrtnr","timestamp":"2024-10-17 23:01:09"}
{"level":"info","message":"Running database migrations...","timestamp":"2024-10-17 23:01:09"}
{"level":"info","message":"Initiating app","timestamp":"2024-10-17 23:01:31"}
{"level":"info","message":"Trying to connect to amqp://localhost:5672","timestamp":"2024-10-17 23:01:31"}
{"level":"info","message":"Connected to RabbitMQ, queue: url-shrtnr","timestamp":"2024-10-17 23:01:31"}
{"level":"info","message":"Running database migrations...","timestamp":"2024-10-17 23:01:31"}
{"code":"ER_ACCESS_DENIED_ERROR","errno":1045,"fatal":true,"level":"error","message":"Database migration failed: ER_ACCESS_DENIED_ERROR: Access denied for user 'mariadb'@'172.17.0.1' (using password: YES)","sqlMessage":"Access denied for user 'mariadb'@'172.17.0.1' (using password: YES)","sqlState":"28000","stack":"Error: ER_ACCESS_DENIED_ERROR: Access denied for user 'mariadb'@'172.17.0.1' (using password: YES)\n    at Sequence._packetToError (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/sequences/Sequence.js:47:14)\n    at Handshake.ErrorPacket (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/sequences/Handshake.js:123:18)\n    at Protocol._parsePacket (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Protocol.js:291:23)\n    at Parser._parsePacket (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Parser.js:433:10)\n    at Parser.write (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Parser.js:43:10)\n    at Protocol.write (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Protocol.js:38:16)\n    at Socket.<anonymous> (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/Connection.js:88:28)\n    at Socket.<anonymous> (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/Connection.js:526:10)\n    at Socket.emit (node:events:519:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    --------------------\n    at Protocol._enqueue (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Protocol.js:144:48)\n    at Protocol.handshake (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Protocol.js:51:23)\n    at Connection.connect (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/Connection.js:116:18)\n    at /Users/bening/Code/url-shrtnr/services/redirector/node_modules/knex/lib/dialects/mysql/index.js:71:18\n    at new Promise (<anonymous>)\n    at Client_MySQL.acquireRawConnection (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/knex/lib/dialects/mysql/index.js:66:12)\n    at create (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/knex/lib/client.js:262:39)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2024-10-17 23:01:31"}
{"level":"info","message":"Initiating app","timestamp":"2024-10-17 23:07:46"}
{"level":"info","message":"Trying to connect to amqp://localhost:5672","timestamp":"2024-10-17 23:07:46"}
{"level":"info","message":"Connected to RabbitMQ, queue: url-shrtnr","timestamp":"2024-10-17 23:07:46"}
{"level":"info","message":"Running database migrations...","timestamp":"2024-10-17 23:07:46"}
{"code":"ECONNREFUSED","fatal":true,"level":"error","message":"Database migration failed:","stack":"AggregateError [ECONNREFUSED]: \n    at internalConnectMultiple (node:net:1118:18)\n    at afterConnectMultiple (node:net:1685:7)\n    --------------------\n    at Protocol._enqueue (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Protocol.js:144:48)\n    at Protocol.handshake (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Protocol.js:51:23)\n    at Connection.connect (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/Connection.js:116:18)\n    at /Users/bening/Code/url-shrtnr/services/redirector/node_modules/knex/lib/dialects/mysql/index.js:71:18\n    at new Promise (<anonymous>)\n    at Client_MySQL.acquireRawConnection (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/knex/lib/dialects/mysql/index.js:66:12)\n    at create (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/knex/lib/client.js:262:39)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2024-10-17 23:07:47"}
{"level":"info","message":"Initiating app","timestamp":"2024-10-17 23:08:04"}
{"level":"info","message":"Trying to connect to amqp://localhost:5672","timestamp":"2024-10-17 23:08:04"}
{"level":"info","message":"Connected to RabbitMQ, queue: url-shrtnr","timestamp":"2024-10-17 23:08:04"}
{"level":"info","message":"Running database migrations...","timestamp":"2024-10-17 23:08:04"}
{"code":"ER_ACCESS_DENIED_ERROR","errno":1045,"fatal":true,"level":"error","message":"Database migration failed: ER_ACCESS_DENIED_ERROR: Access denied for user 'mariadb'@'172.17.0.1' (using password: YES)","sqlMessage":"Access denied for user 'mariadb'@'172.17.0.1' (using password: YES)","sqlState":"28000","stack":"Error: ER_ACCESS_DENIED_ERROR: Access denied for user 'mariadb'@'172.17.0.1' (using password: YES)\n    at Sequence._packetToError (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/sequences/Sequence.js:47:14)\n    at Handshake.ErrorPacket (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/sequences/Handshake.js:123:18)\n    at Protocol._parsePacket (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Protocol.js:291:23)\n    at Parser._parsePacket (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Parser.js:433:10)\n    at Parser.write (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Parser.js:43:10)\n    at Protocol.write (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Protocol.js:38:16)\n    at Socket.<anonymous> (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/Connection.js:88:28)\n    at Socket.<anonymous> (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/Connection.js:526:10)\n    at Socket.emit (node:events:519:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    --------------------\n    at Protocol._enqueue (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Protocol.js:144:48)\n    at Protocol.handshake (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Protocol.js:51:23)\n    at Connection.connect (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/Connection.js:116:18)\n    at /Users/bening/Code/url-shrtnr/services/redirector/node_modules/knex/lib/dialects/mysql/index.js:71:18\n    at new Promise (<anonymous>)\n    at Client_MySQL.acquireRawConnection (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/knex/lib/dialects/mysql/index.js:66:12)\n    at create (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/knex/lib/client.js:262:39)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2024-10-17 23:08:04"}
{"level":"info","message":"Initiating app","timestamp":"2024-10-17 23:13:26"}
{"level":"info","message":"Trying to connect to amqp://localhost:5672","timestamp":"2024-10-17 23:13:26"}
{"level":"info","message":"Connected to RabbitMQ, queue: url-shrtnr","timestamp":"2024-10-17 23:13:26"}
{"level":"info","message":"Running database migrations...","timestamp":"2024-10-17 23:13:26"}
{"code":"ER_ACCESS_DENIED_ERROR","errno":1045,"fatal":true,"level":"error","message":"Database migration failed: ER_ACCESS_DENIED_ERROR: Access denied for user 'mariadb'@'172.17.0.1' (using password: YES)","sqlMessage":"Access denied for user 'mariadb'@'172.17.0.1' (using password: YES)","sqlState":"28000","stack":"Error: ER_ACCESS_DENIED_ERROR: Access denied for user 'mariadb'@'172.17.0.1' (using password: YES)\n    at Sequence._packetToError (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/sequences/Sequence.js:47:14)\n    at Handshake.ErrorPacket (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/sequences/Handshake.js:123:18)\n    at Protocol._parsePacket (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Protocol.js:291:23)\n    at Parser._parsePacket (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Parser.js:433:10)\n    at Parser.write (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Parser.js:43:10)\n    at Protocol.write (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Protocol.js:38:16)\n    at Socket.<anonymous> (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/Connection.js:88:28)\n    at Socket.<anonymous> (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/Connection.js:526:10)\n    at Socket.emit (node:events:519:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    --------------------\n    at Protocol._enqueue (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Protocol.js:144:48)\n    at Protocol.handshake (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Protocol.js:51:23)\n    at Connection.connect (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/Connection.js:116:18)\n    at /Users/bening/Code/url-shrtnr/services/redirector/node_modules/knex/lib/dialects/mysql/index.js:71:18\n    at new Promise (<anonymous>)\n    at Client_MySQL.acquireRawConnection (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/knex/lib/dialects/mysql/index.js:66:12)\n    at create (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/knex/lib/client.js:262:39)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2024-10-17 23:13:26"}
{"level":"info","message":"Initiating app","timestamp":"2024-10-17 23:15:59"}
{"level":"info","message":"Trying to connect to amqp://localhost:5672","timestamp":"2024-10-17 23:15:59"}
{"level":"info","message":"Connected to RabbitMQ, queue: url-shrtnr","timestamp":"2024-10-17 23:15:59"}
{"level":"info","message":"Running database migrations...","timestamp":"2024-10-17 23:15:59"}
{"code":"ER_ACCESS_DENIED_ERROR","errno":1045,"fatal":true,"level":"error","message":"Database migration failed: ER_ACCESS_DENIED_ERROR: Access denied for user 'mariadb'@'172.17.0.1' (using password: NO)","sqlMessage":"Access denied for user 'mariadb'@'172.17.0.1' (using password: NO)","sqlState":"28000","stack":"Error: ER_ACCESS_DENIED_ERROR: Access denied for user 'mariadb'@'172.17.0.1' (using password: NO)\n    at Sequence._packetToError (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/sequences/Sequence.js:47:14)\n    at Handshake.ErrorPacket (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/sequences/Handshake.js:123:18)\n    at Protocol._parsePacket (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Protocol.js:291:23)\n    at Parser._parsePacket (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Parser.js:433:10)\n    at Parser.write (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Parser.js:43:10)\n    at Protocol.write (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Protocol.js:38:16)\n    at Socket.<anonymous> (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/Connection.js:88:28)\n    at Socket.<anonymous> (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/Connection.js:526:10)\n    at Socket.emit (node:events:519:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    --------------------\n    at Protocol._enqueue (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Protocol.js:144:48)\n    at Protocol.handshake (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/protocol/Protocol.js:51:23)\n    at Connection.connect (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql/lib/Connection.js:116:18)\n    at /Users/bening/Code/url-shrtnr/services/redirector/node_modules/knex/lib/dialects/mysql/index.js:71:18\n    at new Promise (<anonymous>)\n    at Client_MySQL.acquireRawConnection (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/knex/lib/dialects/mysql/index.js:66:12)\n    at create (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/knex/lib/client.js:262:39)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2024-10-17 23:15:59"}
{"level":"info","message":"Initiating app","timestamp":"2024-10-17 23:18:26"}
{"level":"info","message":"Trying to connect to amqp://localhost:5672","timestamp":"2024-10-17 23:18:26"}
{"level":"info","message":"Connected to RabbitMQ, queue: url-shrtnr","timestamp":"2024-10-17 23:18:26"}
{"level":"info","message":"Running database migrations...","timestamp":"2024-10-17 23:18:26"}
{"level":"debug","message":"localhost","timestamp":"2024-10-17 23:18:26"}
{"level":"debug","message":"mariadb","timestamp":"2024-10-17 23:18:26"}
{"level":"debug","timestamp":"2024-10-17 23:18:26"}
{"level":"debug","message":"redirection_db","timestamp":"2024-10-17 23:18:26"}
{"level":"debug","message":"3306","timestamp":"2024-10-17 23:18:26"}
{"code":"ER_ACCESS_DENIED_ERROR","errno":1045,"level":"error","message":"Database migration failed: Access denied for user 'mariadb'@'172.17.0.1' (using password: NO)","sqlMessage":"Access denied for user 'mariadb'@'172.17.0.1' (using password: NO)","sqlState":"28000","stack":"Error: Access denied for user 'mariadb'@'172.17.0.1' (using password: NO)\n    at Packet.asError (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql2/lib/packets/packet.js:738:17)\n    at ClientHandshake.execute (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql2/lib/commands/command.js:29:26)\n    at Connection.handlePacket (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql2/lib/connection.js:481:34)\n    at PacketParser.onPacket (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql2/lib/connection.js:97:12)\n    at PacketParser.executeStart (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql2/lib/packet_parser.js:75:16)\n    at Socket.<anonymous> (/Users/bening/Code/url-shrtnr/services/redirector/node_modules/mysql2/lib/connection.js:104:25)\n    at Socket.emit (node:events:519:28)\n    at addChunk (node:internal/streams/readable:559:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)\n    at Readable.push (node:internal/streams/readable:390:5)","timestamp":"2024-10-17 23:18:26"}
{"level":"info","message":"Initiating app","timestamp":"2024-10-17 23:18:53"}
{"level":"info","message":"Trying to connect to amqp://localhost:5672","timestamp":"2024-10-17 23:18:53"}
{"level":"info","message":"Connected to RabbitMQ, queue: url-shrtnr","timestamp":"2024-10-17 23:18:53"}
{"level":"info","message":"Running database migrations...","timestamp":"2024-10-17 23:18:53"}
{"level":"debug","message":"localhost","timestamp":"2024-10-17 23:18:53"}
{"level":"debug","message":"mariadb","timestamp":"2024-10-17 23:18:53"}
{"level":"debug","message":"password","timestamp":"2024-10-17 23:18:53"}
{"level":"debug","message":"redirection_db","timestamp":"2024-10-17 23:18:53"}
{"level":"debug","message":"3306","timestamp":"2024-10-17 23:18:53"}
{"level":"info","message":"Database migration completed.","timestamp":"2024-10-17 23:18:53"}
{"level":"info","message":"Server listening on port 32451","timestamp":"2024-10-17 23:18:53"}
{"level":"info","message":"Received SIGINT. Shutting down gracefully...","timestamp":"2024-10-17 23:19:28"}
